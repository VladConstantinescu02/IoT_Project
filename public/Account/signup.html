<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/11.0.0/material-components-web.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  </head>
<body>
    <nav class="mdc-list navbar">
      <a class="mdc-list-item" href="index.html">
          Landing
      </a>
      <a class="mdc-list-item" href="signup.html">
          Sign Up
      </a>
      <a class="mdc-list-item" href="signin.html">
          Sign In
      </a>
    </nav>
    <div class="auth-container">
        <h2 style="color: #eb5e92">Sign Up</h2>
        <div class="form-item">
            <label class="mdc-text-field mdc-text-field--outlined">
                <span  class="mdc-notched-outline">
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__leading"></span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__notch">
                    <span style="border-color: #eb5e92; color: #eb5e92" class="mdc-floating-label" id="my-label-id">Name</span>
                  </span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__trailing"></span>
                </span>
                <input id="Name" style="color: #eb5e92; background-color: #272c2b;" type="text" class="mdc-text-field__input">
              </label>
        </div>

        <div class="form-item">
            <label class="mdc-text-field mdc-text-field--outlined">
                <span  class="mdc-notched-outline">
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__leading"></span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__notch">
                    <span style="border-color: #eb5e92; color: #eb5e92" class="mdc-floating-label" id="my-label-id">Username</span>
                  </span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__trailing"></span>
                </span>
                <input id="Username" style="color: #eb5e92; background-color: #272c2b;" type="text" class="mdc-text-field__input">
              </label>
        </div>

        <div class="form-item">
            <label class="mdc-text-field mdc-text-field--outlined">
                <span  class="mdc-notched-outline">
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__leading"></span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__notch">
                    <span style="border-color: #eb5e92; color: #eb5e92" class="mdc-floating-label" id="my-label-id">Email</span>
                  </span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__trailing"></span>
                </span>
                <input id="Email" style="color: #eb5e92; background-color: #272c2b;" type="email" class="mdc-text-field__input">
              </label>
        </div>

        <div class="form-item">
            <label class="mdc-text-field mdc-text-field--outlined">
                <span  class="mdc-notched-outline">
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__leading"></span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__notch">
                    <span style="border-color: #eb5e92; color: #eb5e92" class="mdc-floating-label" id="my-label-id">Password</span>
                  </span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__trailing"></span>
                </span>
                <input id="Password" style="color: #eb5e92; background-color: #272c2b;" type="password" class="mdc-text-field__input">
              </label>
        </div>

        <div class="form-item">
            <label class="mdc-text-field mdc-text-field--outlined">
                <span  class="mdc-notched-outline">
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__leading"></span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__notch">
                    <span style="border-color: #eb5e92; color: #eb5e92" class="mdc-floating-label" id="my-label-id">Confirm Password</span>
                  </span>
                  <span style="border-color: #eb5e92" class="mdc-notched-outline__trailing"></span>
                </span>
                <input id="ConfirmPassword" style="color: #eb5e92; background-color: #272c2b;" type="password" class="mdc-text-field__input">
              </label>
        </div>

        <div>
            <button id="Submit" class="submit-btn">
                Create &nbsp;<span class="material-symbols-outlined">add_circle</span>
            </button>
        </div>
    </div>

    <div class="alert-container">
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/11.0.0/material-components-web.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const ALERT_SUCCESS = "alert-success";
        const ALERT_ERROR = "alert-error";
        const ALERT_ANIMATION_TIMEOUT = 3000;
        const ALERT_REMOVE_TIMEOUT = 500;

        // Initialize text fields
        const textFields = document.querySelectorAll('.mdc-text-field');
        textFields.forEach((textField) => {
            new mdc.textField.MDCTextField(textField);
        });

        const alertContainer = document.querySelector(".alert-container");

        const getAlert = (type, msg) => {
          return `
          <div class="alert swing-in-top-fwd ${type}">
            ${msg}
          </div>
          `
        }

        const showAlert = (html) => {
          let alert = document.createElement("div");
          alert.innerHTML = html;
          alertContainer.appendChild(alert);

          setTimeout(() => {
            alert.classList.add("swing-out-top-bck");
          }, ALERT_ANIMATION_TIMEOUT);

          setTimeout(() => {
            alertContainer.removeChild(alert);
          }, ALERT_ANIMATION_TIMEOUT + ALERT_REMOVE_TIMEOUT);
        }

        document.getElementById("Submit").addEventListener("click", async () => {
          const nameElement = document.getElementById("Name");
          const usernameElement = document.getElementById("Username");
          const emailElement = document.getElementById("Email");
          const passwordElement = document.getElementById("Password");
          const confirmPasswordElement = document.getElementById("ConfirmPassword");

          const name = nameElement.value;
          const username = usernameElement.value;
          const email = emailElement.value;
          const password = passwordElement.value;
          const confirmPassword = confirmPasswordElement.value;
                    
          if (password === confirmPassword) {
            const res = await axios.post("http://localhost:5085/api/users/create", 
            {
              Name: name,
              Username: username,
              Email: email,
              Password: password
            },
            {
              headers: {
                "Content-Type": "application/json",
              }
            })
            console.log(res);
          } else {
            showAlert(getAlert(ALERT_ERROR, "Passwords do not match"));
          }
        });
    </script>
</body>
</html>